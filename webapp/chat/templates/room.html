{% extends "base.html" %}

{% block extra_css %}
<link href="static/css/landing-page.css" rel="stylesheet">
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
{% endblock %}

{% block title %}{{ family }}{% endblock %}

{% block extra_js %}
<script type="text/javascript">
 window.room = "{{ family.id }}";
 var user = "{{user.id}}";
 var home_lat = "{{family.home_lat}}";
 var home_long = "{{family.home_long}}";
 var work_lat = "{{user.work_lat}}";
 var work_long = "{{user.work_long}}";
 var my_place = 'street-view';
 var ms = [];
 var msid = [];
var familySize = {{members | length}};
{% for id, type in members %}
        ms[{{id}}]= '{{type}}';
        msid.push({{id}});
{% endfor %}

</script>


<script type="text/javascript" src="static/js/bonhomie.js"></script>
<script type="text/javascript" src="static/js/chat.js"></script>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.9/d3.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.5.1/rickshaw.min.js"></script>
<!-- <script type="text/javascript" src="static/js/graph.js"></script> -->

<link href="static/css/real_time.css" rel="stylesheet" type="text/css">
<link href="static/css/bonhomie.css" rel="stylesheet">
<script language="javascript" type="text/javascript" src="static/js/jquery.flot.js"></script>
<script type="text/javascript" src="static/js/real_time.js"></script>
<script type="text/javascript" src="static/js/select_chart.js"></script>

<script type="text/javascript">
var messageHistory = [];
var message;
{% for msg in messages %}
    message= {};
    message['user'] = {{msg.sender_user_id}};
    message['msg'] = '{{msg.text}}';
    message['emotion'] = '{{msg.emotion}}';
    messageHistory.push(message);
{% endfor %}

for (var i=0; i<messageHistory.length; i++){
    doSetTimeout(messageHistory[i]['user'], messageHistory[i]['msg'], messageHistory[i]['emotion'], 100*i);
}

function doSetTimeout(a,b,c, t) {
    if (c=='undefined')
        setTimeout(function(){
            render_msg(a,b,c);
        }, t);
    else setTimeout(function(){
            render_msg(a,b);
        }, t);
}

</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.5.1/rickshaw.min.css" media="all">
<link rel="stylesheet" href="static/css/home_button.css" media="all">

{% endblock %}

{% block content %}

<nav class="hidden navbar navbar-default navbar-fixed-top topnav" role="navigation" >
    <div class="container topnav">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand topnav" href="#">Hommee.co</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/login">Logout</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div id="map" class="hidden"></div>
<div class="container" >
    <div class="row">
        <div class="col-xs-8">
            <div id="people">
                <section class="stage"></section>
				<!--		<img id="myHome" class="img-responsive" src="static/img/house.png" alt="" style="width: 30%;">-->
            </div>
            <!-- Chat -->
            <div class="col-xs-12" >
                <div id="chat">
                    <div class="hidden" id="nickname">
                        <form id="set-nickname" class="wrap">
                            <p>Please type in your nickname and press enter.</p>
                            <input id="nick">
                            <p id="nickname-err">Nickname already in use</p>
                        </form>
                    </div>
                    <div id="connecting">
                        <div class="wrap">Connecting to socket.io server</div>
                    </div>

                    <div id="messages" class="hidden">
                        <div id="nicknames"><span>Online:</span></div>
                        <!-- <div id="lines"></div> -->
                    </div>

                    <form id="send-message">
                        <input id="message" data-emoji-input="unicode">
                        <button id="messageButton" type="button" class="btn btn-info btn-send">Send</button>
                    </form>
                </div>
            </div>
            <!-- Chat ends -->
        </div>

        <div class="col-xs-4">
            <div id="lines">
            </div>
			<h2 id="line-title">Timeline</h2>
			<!--<div class="homebubble">
			</div>-->
            <div>
			</div>
				<img id="character" class="img-responsive" src="static/img/character.png" alt="" style="width: 80%;">
            </div>
        </div>
    </div>
</div>


<!-- Home modal -->
<div class="modal fade home-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" style="text-align: center">
      <h4>Home Info</h4>

        <div id="chart_home" style="width:600px;height:400px;">
        </div>

    </div>
  </div>
</div>



<!-- Grandpa modal -->
<div class="modal fade grandpa-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" style="text-align: center">
      <h4>Grandpa Info</h4>
        <div id="temps">
        </div>

            <div id="content-grandpa">

              <div class="demo-container-grandpa">
                <div id="placeholder" class="demo-placeholder-grandpa"></div>
              </div>

              <p>Time between updates: <input id="updateInterval" type="text" value="" style="text-align: right; width:5em"> milliseconds</p>

            </div>
    </div>
  </div>
</div>


{% endblock %}
